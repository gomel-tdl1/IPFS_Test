(this.webpackJsonptodolist=this.webpackJsonptodolist||[]).push([[5],{1452:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(170),s=n(77),i=n(204),o=n(267),u=n(0),d=n(250),l=n(366),f=n(367),j=n(1422).create({baseURL:"https://ipfs.io/ipfs/",headers:{}}),b=function(e){return j.get(e)},O=n(602),p=n(1449),h=n(1451),v=n(1444),m=n(1418),x=n(1440),k=n(407),g=n(26),w=function(e){var t=Object(u.useState)(!1),n=Object(i.a)(t,2),r=n[0],c=n[1],d=Object(u.useState)(!1),j=Object(i.a)(d,2),b=j[0],w=j[1],C=Object(u.useState)(""),S=Object(i.a)(C,2),y=S[0],P=S[1],I=Object(u.useState)(""),N=Object(i.a)(I,2),E=N[0],M=N[1];Object(u.useEffect)((function(){Object(s.a)(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new o.a.providers.Web3Provider(window.ethereum),n=t.getSigner(),e.next=4,n.getAddress();case 4:r=e.sent,P(r);case 6:case"end":return e.stop()}}),e)})))()}),[]);var A=function(){var t=Object(s.a)(a.a.mark((function t(){var n,r,s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(/^0x[0-9a-f]{40}$/i.test(E)){t.next=3;break}return O.a.error({key:"updatable",message:"Enter valid address"}),t.abrupt("return");case 3:return w(!0),n=new o.a.providers.Web3Provider(window.ethereum),r=n.getSigner(),s=new o.a.Contract(l.a,f.a,r),t.next=9,s.transferFrom(e.tokenOwner,E,e.tokenId);case 9:w(!1),c(!1);case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(p.a,{hoverable:!0,style:{width:350},cover:Object(g.jsx)("img",{alt:"example",src:e.file?"https://ipfs.io/ipfs/".concat(e.file):"https://i.stack.imgur.com/6M513.png"}),onClick:function(){e.tokenOwner===y?c(!0):O.a.warning({key:"updatable",message:"You cant transfer this token, because you are not owner"})},children:[Object(g.jsx)(m.a,{title:e.name,description:e.description}),e.tokenOwner===y&&Object(g.jsx)(x.a,{children:Object(g.jsx)(k.a,{type:"success",children:"Ready for transfer"})})]}),Object(g.jsx)(h.a,{title:"Transfer",visible:r,onOk:A,okButtonProps:{disabled:!E},confirmLoading:b,onCancel:function(){c(!1)},children:Object(g.jsx)(v.a,{placeholder:"Enter address to transfer",value:E,onChange:function(e){return M(e.target.value)}})})]})},C=n(587),S=n(1453),y=n(1450),P=n(373),I=Object(d.b)((function(e){return{isConnected:e.auth.isConnected,ipfs:e.auth.ipfs}}),{})((function(e){var t=Object(u.useState)(null),n=Object(i.a)(t,2),r=n[0],d=n[1],j=Object(u.useState)(""),O=Object(i.a)(j,2),p=O[0],h=O[1],v=Object(u.useState)(null),m=Object(i.a)(v,2),x=m[0],k=m[1],I=Object(u.useState)(null),N=Object(i.a)(I,2),E=N[0],M=N[1],A=Object(u.useState)(1),R=Object(i.a)(A,2),W=R[0],F=R[1],J=Object(u.useState)(!1),L=Object(i.a)(J,2),T=L[0],U=L[1];Object(u.useEffect)((function(){var e=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,r=(t-1)*n;return null===e||void 0===e?void 0:e.slice(r).slice(0,n)}(x,W);M(e)}),[x,W]),Object(u.useEffect)((function(){U(!0);var e=new o.a.providers.Web3Provider(window.ethereum),t=e.getSigner(),n=new o.a.Contract(l.a,f.a,e);Object(s.a)(a.a.mark((function e(){var r,s,i,o,u,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAddress();case 2:return r=e.sent,h(r),e.next=6,n.getNextTokenId();case 6:for(s=+e.sent,i=[],o=0;o<s;o++)i.push(o);return e.next=11,Promise.all(i.map((function(e){return n.ownerOf(e)})));case 11:return u=e.sent,e.next=14,Promise.all(i.map((function(e){return n.tokenURI(e)})));case 14:return l=e.sent,e.next=17,Promise.all(l.map((function(e){return b(e).then((function(e){return e.data}))})));case 17:f=(f=e.sent).map((function(e,t){return Object(c.a)(Object(c.a)({},e),{},{tokenId:i[t],tokenOwner:u[t]})})),d(f),k(f),U(!1);case 22:case"end":return e.stop()}}),e)})))()}),[]);return T?Object(g.jsx)(P.a,{height:"490px"}):Object(g.jsxs)("div",{className:"flex justify-center",children:[e.isConnected&&Object(g.jsxs)("div",{className:"py-6",children:[Object(g.jsx)(S.a,{checkedChildren:"My",unCheckedChildren:"All",defaultChecked:!1,onChange:function(e){e?(k(r.filter((function(e){return e.tokenOwner===p}))),F(1)):(k(r),F(1))}}),Object(g.jsx)("div",{className:"grid grid-cols-3 gap-4 py-6",children:null===E||void 0===E?void 0:E.map((function(e){return Object(g.jsx)(w,{name:e.name,description:e.description,file:e.file,tokenId:e.tokenId,tokenOwner:e.tokenOwner},e.tokenId)}))}),Object(g.jsx)(y.a,{current:W,total:null===x||void 0===x?void 0:x.length,pageSize:20,onChange:function(e){F(e)}})]}),e.isConnected&&0===(null===r||void 0===r?void 0:r.length)&&Object(g.jsx)(C.a,{level:4,className:"mt-10",children:"You haven't tokens"}),!e.isConnected&&Object(g.jsx)(C.a,{level:4,className:"mt-10",children:"Please connect to MetaMask"})]})}));t.default=I}}]);
//# sourceMappingURL=5.1b7d50ed.chunk.js.map