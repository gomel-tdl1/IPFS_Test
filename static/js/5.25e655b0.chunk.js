(this.webpackJsonptodolist=this.webpackJsonptodolist||[]).push([[5],{1451:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(170),s=n(77),i=n(204),o=n(267),u=n(0),d=n(250),l=n(366),f=n(367),j=n(1421).create({baseURL:"https://ipfs.io/ipfs/",headers:{}}),b=function(e){return j.get(e)},O=n(601),p=n(1448),h=n(1450),v=n(1443),m=n(1417),k=n(1439),x=n(406),w=n(26),g=function(e){var t=Object(u.useState)(!1),n=Object(i.a)(t,2),r=n[0],c=n[1],d=Object(u.useState)(!1),j=Object(i.a)(d,2),b=j[0],g=j[1],C=Object(u.useState)(""),S=Object(i.a)(C,2),y=S[0],P=S[1],I=Object(u.useState)(""),N=Object(i.a)(I,2),E=N[0],M=N[1];Object(u.useEffect)((function(){Object(s.a)(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new o.a.providers.Web3Provider(window.ethereum),n=t.getSigner(),e.next=4,n.getAddress();case 4:r=e.sent,P(r);case 6:case"end":return e.stop()}}),e)})))()}),[]);var A=function(){var t=Object(s.a)(a.a.mark((function t(){var n,r,s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(/^0x[0-9a-f]{40}$/i.test(E)){t.next=3;break}return O.a.error({key:"updatable",message:"Enter valid address"}),t.abrupt("return");case 3:return g(!0),n=new o.a.providers.Web3Provider(window.ethereum),r=n.getSigner(),s=new o.a.Contract(l.a,f.a,r),t.next=9,s.transferFrom(e.tokenOwner,E,e.tokenId);case 9:g(!1),c(!1);case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(p.a,{hoverable:!0,style:{width:350},cover:Object(w.jsx)("img",{alt:"example",src:e.file?"https://ipfs.io/ipfs/".concat(e.file):"https://i.stack.imgur.com/6M513.png"}),onClick:function(){e.tokenOwner===y?c(!0):O.a.warning({key:"updatable",message:"You cant transfer this token, because you are not owner"})},children:[Object(w.jsx)(m.a,{title:e.name,description:e.description}),e.tokenOwner===y&&Object(w.jsx)(k.a,{children:Object(w.jsx)(x.a,{type:"success",children:"Ready for transfer"})})]}),Object(w.jsx)(h.a,{title:"Transfer",visible:r,onOk:A,okButtonProps:{disabled:!E},confirmLoading:b,onCancel:function(){c(!1)},children:Object(w.jsx)(v.a,{placeholder:"Enter address to transfer",value:E,onChange:function(e){return M(e.target.value)}})})]})},C=n(586),S=n(1452),y=n(1449),P=Object(d.b)((function(e){return{isConnected:e.auth.isConnected,ipfs:e.auth.ipfs}}),{})((function(e){var t=Object(u.useState)(null),n=Object(i.a)(t,2),r=n[0],d=n[1],j=Object(u.useState)(""),O=Object(i.a)(j,2),p=O[0],h=O[1],v=Object(u.useState)(null),m=Object(i.a)(v,2),k=m[0],x=m[1],P=Object(u.useState)(null),I=Object(i.a)(P,2),N=I[0],E=I[1],M=Object(u.useState)(1),A=Object(i.a)(M,2),R=A[0],W=A[1];Object(u.useEffect)((function(){var e=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,r=(t-1)*n;return null===e||void 0===e?void 0:e.slice(r).slice(0,n)}(k,R);E(e)}),[k,R]),Object(u.useEffect)((function(){var e=new o.a.providers.Web3Provider(window.ethereum),t=e.getSigner(),n=new o.a.Contract(l.a,f.a,e);Object(s.a)(a.a.mark((function e(){var r,s,i,o,u,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAddress();case 2:return r=e.sent,h(r),e.next=6,n.getNextTokenId();case 6:for(s=+e.sent,i=[],o=0;o<s;o++)i.push(o);return e.next=11,Promise.all(i.map((function(e){return n.ownerOf(e)})));case 11:return u=e.sent,e.next=14,Promise.all(i.map((function(e){return n.tokenURI(e)})));case 14:return l=e.sent,e.next=17,Promise.all(l.map((function(e){return b(e).then((function(e){return e.data}))})));case 17:f=(f=e.sent).map((function(e,t){return Object(c.a)(Object(c.a)({},e),{},{tokenId:i[t],tokenOwner:u[t]})})),d(f),x(f);case 21:case"end":return e.stop()}}),e)})))()}),[]);return Object(w.jsxs)("div",{className:"flex justify-center",children:[e.isConnected&&Object(w.jsxs)("div",{className:"py-6",children:[Object(w.jsx)(S.a,{checkedChildren:"My",unCheckedChildren:"All",defaultChecked:!1,onChange:function(e){e?(x(r.filter((function(e){return e.tokenOwner===p}))),W(1)):(x(r),W(1))}}),Object(w.jsx)("div",{className:"grid grid-cols-3 gap-4 py-6",children:null===N||void 0===N?void 0:N.map((function(e){return Object(w.jsx)(g,{name:e.name,description:e.description,file:e.file,tokenId:e.tokenId,tokenOwner:e.tokenOwner},e.tokenId)}))}),Object(w.jsx)(y.a,{current:R,total:null===k||void 0===k?void 0:k.length,pageSize:20,onChange:function(e){W(e)}})]}),e.isConnected&&0===(null===r||void 0===r?void 0:r.length)&&Object(w.jsx)(C.a,{level:4,className:"mt-10",children:"You haven't tokens"}),!e.isConnected&&Object(w.jsx)(C.a,{level:4,className:"mt-10",children:"Please connect to MetaMask"})]})}));t.default=P}}]);
//# sourceMappingURL=5.25e655b0.chunk.js.map